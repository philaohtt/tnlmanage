<!doctype html>
<html lang="vi" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Student Directory</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;display=swap" rel="stylesheet">
  <script src="/_sdk/element_sdk.js"></script>
  <style>
        body {
            box-sizing: border-box;
            font-family: 'Inter', sans-serif;
        }
        * {
            box-sizing: border-box;
        }
        .status-active { background: #dcfce7; color: #166534; }
        .status-inactive { background: #fef3c7; color: #92400e; }
        .status-finished { background: #dbeafe; color: #1e40af; }
        .status-dropped { background: #fee2e2; color: #991b1b; }
        .tab-active { 
            border-bottom: 2px solid #3b82f6; 
            color: #3b82f6;
            font-weight: 600;
        }
        .table-row:hover {
            background: #f1f5f9;
            cursor: pointer;
        }
        .modal-overlay {
            background: rgba(0, 0, 0, 0.5);
            opacity: 0;
            transition: opacity 0.2s ease;
        }
        .modal-overlay.active {
            opacity: 1;
        }
        .modal-content {
            transform: translateX(100%);
            transition: transform 0.3s ease;
        }
        .modal-content.active {
            transform: translateX(0);
        }
        .filter-panel {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease, padding 0.3s ease;
        }
        .filter-panel.open {
            max-height: 200px;
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full bg-gray-50">
  <div id="app" class="h-full flex flex-col"><!-- Header -->
   <header class="bg-white border-b border-gray-200 px-6 py-4">
    <div class="flex items-center justify-between">
     <h1 id="page-title" class="text-xl font-semibold text-gray-800">Student Directory</h1><span class="px-3 py-1 bg-gray-200 text-gray-600 text-sm rounded-full font-medium">Read only</span>
    </div>
   </header><!-- Search and Controls -->
   <div class="bg-white border-b border-gray-200 px-6 py-4">
    <div class="flex flex-wrap items-center gap-3">
     <div class="flex-1 min-w-64"><input type="text" id="search-input" placeholder="Search by name, ID, contact, school…" class="w-full px-4 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
     </div><button id="filter-toggle" class="px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 flex items-center gap-2">
      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z" />
      </svg> Filters </button> <button id="clear-btn" class="px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50"> Clear </button>
    </div><!-- Filter Panel -->
    <div id="filter-panel" class="filter-panel">
     <div class="flex flex-wrap items-center gap-4 pt-4">
      <div class="flex items-center gap-2"><label class="text-sm text-gray-600">Status:</label> <select id="status-filter" class="px-3 py-1.5 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"> <option value="all">All</option> <option value="active">Active</option> <option value="inactive">Inactive</option> <option value="finished">Finished</option> <option value="dropped">Dropped</option> </select>
      </div>
      <div class="flex items-center gap-2"><label class="text-sm text-gray-600">Class:</label> <select id="class-filter" class="px-3 py-1.5 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"> <option value="all">All Classes</option> </select>
      </div>
      <div class="flex items-center gap-2"><label class="text-sm text-gray-600">Sort:</label> <select id="sort-select" class="px-3 py-1.5 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"> <option value="name-asc">Name (A–Z)</option> <option value="name-desc">Name (Z–A)</option> <option value="id-asc">ID (Low–High)</option> <option value="id-desc">ID (High–Low)</option> <option value="newest">Newest</option> <option value="oldest">Oldest</option> </select>
      </div>
     </div>
    </div>
   </div><!-- Status Tabs -->
   <div class="bg-white border-b border-gray-200 px-6">
    <div class="flex gap-6"><button class="tab-btn tab-active py-3 text-sm" data-tab="active"> Active Students (<span id="active-count">0</span>) </button> <button class="tab-btn py-3 text-sm text-gray-500 hover:text-gray-700" data-tab="inactive"> Inactive/Finished (<span id="inactive-count">0</span>) </button> <button class="tab-btn py-3 text-sm text-gray-500 hover:text-gray-700" data-tab="dropped"> Dropped (<span id="dropped-count">0</span>) </button>
    </div>
   </div><!-- Main Table -->
   <div class="flex-1 overflow-auto p-6">
    <div class="bg-white rounded-lg border border-gray-200 overflow-hidden">
     <table class="w-full">
      <thead class="bg-gray-50 border-b border-gray-200">
       <tr>
        <th class="px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Public Code</th>
        <th class="px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Full Name</th>
        <th class="px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Date of Birth</th>
        <th class="px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Status</th>
        <th class="px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">School</th>
        <th class="px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Class</th>
       </tr>
      </thead>
      <tbody id="students-table" class="divide-y divide-gray-200">
       <tr>
        <td colspan="6" class="px-4 py-8 text-center text-gray-500">Loading students…</td>
       </tr>
      </tbody>
     </table>
    </div>
   </div>
  </div><!-- Profile Modal/Drawer -->
  <div id="profile-modal" class="fixed inset-0 z-50 hidden">
   <div class="modal-overlay absolute inset-0" id="modal-overlay"></div>
   <div class="modal-content absolute right-0 top-0 h-full w-full max-w-lg bg-white shadow-xl flex flex-col">
    <div class="flex items-center justify-between px-6 py-4 border-b border-gray-200">
     <div>
      <h2 id="modal-name" class="text-lg font-semibold text-gray-800"></h2>
      <p id="modal-code" class="text-sm text-gray-500"></p>
     </div><button id="close-modal" class="p-2 hover:bg-gray-100 rounded-lg">
      <svg class="w-5 h-5 text-gray-500" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
      </svg></button>
    </div>
    <div class="flex-1 overflow-auto p-6"><!-- Basic Info Section -->
     <div class="mb-6">
      <h3 class="text-sm font-semibold text-gray-800 mb-3 flex items-center gap-2">
       <svg class="w-4 h-4" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
       </svg> Basic Info</h3>
      <div class="bg-gray-50 rounded-lg p-4 space-y-3">
       <div class="flex justify-between"><span class="text-sm text-gray-500">Public Code</span> <span id="info-code" class="text-sm font-medium text-gray-800"></span>
       </div>
       <div class="flex justify-between"><span class="text-sm text-gray-500">Full Name</span> <span id="info-name" class="text-sm font-medium text-gray-800"></span>
       </div>
       <div class="flex justify-between"><span class="text-sm text-gray-500">Date of Birth</span> <span id="info-dob" class="text-sm font-medium text-gray-800"></span>
       </div>
       <div class="flex justify-between"><span class="text-sm text-gray-500">Status</span> <span id="info-status" class="text-sm font-medium"></span>
       </div>
       <div class="flex justify-between"><span class="text-sm text-gray-500">School</span> <span id="info-school" class="text-sm font-medium text-gray-800"></span>
       </div>
       <div class="flex justify-between"><span class="text-sm text-gray-500">Class</span> <span id="info-class" class="text-sm font-medium text-gray-800"></span>
       </div>
      </div>
     </div><!-- Contacts Section -->
     <div class="mb-6">
      <h3 class="text-sm font-semibold text-gray-800 mb-3 flex items-center gap-2">
       <svg class="w-4 h-4" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
       </svg> Contacts</h3>
      <div class="bg-gray-50 rounded-lg p-4 space-y-3">
       <div class="flex justify-between"><span class="text-sm text-gray-500">Student Phone</span> <span id="info-student-phone" class="text-sm font-medium text-gray-800"></span>
       </div>
       <div class="flex justify-between"><span class="text-sm text-gray-500">Parent Name</span> <span id="info-parent-name" class="text-sm font-medium text-gray-800"></span>
       </div>
       <div class="flex justify-between"><span class="text-sm text-gray-500">Parent Phone</span> <span id="info-parent-phone" class="text-sm font-medium text-gray-800"></span>
       </div>
       <div class="flex justify-between"><span class="text-sm text-gray-500">Emergency Contact</span> <span id="info-emergency" class="text-sm font-medium text-gray-800"></span>
       </div>
      </div>
     </div><!-- Notes Section -->
     <div id="notes-section" class="hidden">
      <h3 class="text-sm font-semibold text-gray-800 mb-3 flex items-center gap-2">
       <svg class="w-4 h-4" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
       </svg> Notes (Read only)</h3>
      <div class="bg-gray-50 rounded-lg p-4 space-y-4">
       <div id="academic-notes-container"><label class="text-sm text-gray-500 block mb-1">Academic Notes</label>
        <p id="info-academic-notes" class="text-sm text-gray-800 whitespace-pre-wrap"></p>
       </div>
       <div id="admin-notes-container"><label class="text-sm text-gray-500 block mb-1">Admin Notes</label>
        <p id="info-admin-notes" class="text-sm text-gray-800 whitespace-pre-wrap"></p>
       </div>
      </div>
     </div>
    </div>
   </div>
  </div>
  <script>
        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyCDzv0HseeLfijzyXZjKWFh9QaLrMB4afo",
            authDomain: "tnl2026.firebaseapp.com",
            projectId: "tnl2026",
            storageBucket: "tnl2026.firebasestorage.app",
            messagingSenderId: "883525152224",
            appId: "1:883525152224:web:619ae152cd8df3fcca8f85",
            measurementId: "G-3K6LXCKHZ9"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        // State
        let allStudents = [];
        let classMap = {};
        let currentTab = 'active';
        let searchQuery = '';
        let statusFilter = 'all';
        let classFilter = 'all';
        let sortBy = 'name-asc';
        let filterPanelOpen = false;

        // Default config
        const defaultConfig = {
            page_title: 'Student Directory'
        };

        // Remove diacritics for Vietnamese-safe search
        function removeDiacritics(str) {
            if (!str) return '';
            return str.normalize('NFD')
                .replace(/[\u0300-\u036f]/g, '')
                .replace(/đ/g, 'd')
                .replace(/Đ/g, 'D')
                .toLowerCase();
        }

        // Format date from yyyy-mm-dd to dd/mm/yyyy
        function formatDate(dateStr) {
            if (!dateStr) return '—';
            const parts = dateStr.split('-');
            if (parts.length !== 3) return dateStr;
            return `${parts[2]}/${parts[1]}/${parts[0]}`;
        }

        // Get status badge class
        function getStatusClass(status) {
            const classes = {
                'active': 'status-active',
                'inactive': 'status-inactive',
                'finished': 'status-finished',
                'dropped': 'status-dropped'
            };
            return classes[status] || 'status-inactive';
        }

        // Load classes first
        async function loadClasses() {
            try {
                const snapshot = await db.collection('classes').get();
                snapshot.forEach(doc => {
                    const data = doc.data();
                    classMap[doc.id] = data.name || doc.id;
                });
                
                // Populate class filter dropdown
                const classFilterSelect = document.getElementById('class-filter');
                classFilterSelect.innerHTML = '<option value="all">All Classes</option>';
                Object.entries(classMap).sort((a, b) => a[1].localeCompare(b[1])).forEach(([id, name]) => {
                    const option = document.createElement('option');
                    option.value = id;
                    option.textContent = name;
                    classFilterSelect.appendChild(option);
                });
            } catch (error) {
                console.error('Error loading classes:', error);
            }
        }

        // Load students with realtime listener
        function loadStudents() {
            db.collection('students')
                .where('isDeleted', '==', false)
                .onSnapshot(snapshot => {
                    allStudents = [];
                    snapshot.forEach(doc => {
                        allStudents.push({ id: doc.id, ...doc.data() });
                    });
                    updateCounts();
                    renderStudents();
                }, error => {
                    console.error('Error loading students:', error);
                    const tbody = document.getElementById('students-table');
                    tbody.innerHTML = `
                        <tr>
                            <td colspan="6" class="px-4 py-8 text-center text-red-500">
                                Permission denied or error loading students
                            </td>
                        </tr>
                    `;
                });
        }

        // Filter students based on current tab and filters
        function getFilteredStudents() {
            let filtered = [...allStudents];

            // Tab filter
            if (currentTab === 'active') {
                filtered = filtered.filter(s => s.status === 'active');
            } else if (currentTab === 'inactive') {
                filtered = filtered.filter(s => s.status === 'inactive' || s.status === 'finished');
            } else if (currentTab === 'dropped') {
                filtered = filtered.filter(s => s.status === 'dropped');
            }

            // Status filter (additional filter within tab)
            if (statusFilter !== 'all') {
                filtered = filtered.filter(s => s.status === statusFilter);
            }

            // Class filter
            if (classFilter !== 'all') {
                filtered = filtered.filter(s => s.classId === classFilter);
            }

            // Search filter
            if (searchQuery) {
                const query = removeDiacritics(searchQuery);
                filtered = filtered.filter(s => {
                    const searchableFields = [
                        s.fullName,
                        s.publicCode,
                        s.school,
                        s.contacts?.studentPhone,
                        s.contacts?.parentPhone
                    ];
                    return searchableFields.some(field => 
                        field && removeDiacritics(field).includes(query)
                    );
                });
            }

            // Sort
            filtered.sort((a, b) => {
                switch (sortBy) {
                    case 'name-asc':
                        return (a.fullName || '').localeCompare(b.fullName || '', 'vi');
                    case 'name-desc':
                        return (b.fullName || '').localeCompare(a.fullName || '', 'vi');
                    case 'id-asc':
                        return (a.publicCode || '').localeCompare(b.publicCode || '', undefined, { numeric: true });
                    case 'id-desc':
                        return (b.publicCode || '').localeCompare(a.publicCode || '', undefined, { numeric: true });
                    case 'newest':
                        return (b.createdAt?.toMillis?.() || 0) - (a.createdAt?.toMillis?.() || 0);
                    case 'oldest':
                        return (a.createdAt?.toMillis?.() || 0) - (b.createdAt?.toMillis?.() || 0);
                    default:
                        return 0;
                }
            });

            return filtered;
        }

        // Update tab counts
        function updateCounts() {
            const activeCount = allStudents.filter(s => s.status === 'active').length;
            const inactiveCount = allStudents.filter(s => s.status === 'inactive' || s.status === 'finished').length;
            const droppedCount = allStudents.filter(s => s.status === 'dropped').length;

            document.getElementById('active-count').textContent = activeCount;
            document.getElementById('inactive-count').textContent = inactiveCount;
            document.getElementById('dropped-count').textContent = droppedCount;
        }

        // Render students table
        function renderStudents() {
            const filtered = getFilteredStudents();
            const tbody = document.getElementById('students-table');

            if (filtered.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="6" class="px-4 py-8 text-center text-gray-500">
                            No students found
                        </td>
                    </tr>
                `;
                return;
            }

            tbody.innerHTML = filtered.map(student => `
                <tr class="table-row" data-id="${student.id}">
                    <td class="px-4 py-3 text-sm font-medium text-gray-800">${student.publicCode || '—'}</td>
                    <td class="px-4 py-3 text-sm text-gray-800">${student.fullName || '—'}</td>
                    <td class="px-4 py-3 text-sm text-gray-600">${formatDate(student.dob)}</td>
                    <td class="px-4 py-3">
                        <span class="px-2 py-1 text-xs font-medium rounded-full ${getStatusClass(student.status)}">
                            ${student.status || 'unknown'}
                        </span>
                    </td>
                    <td class="px-4 py-3 text-sm text-gray-600">${student.school || '—'}</td>
                    <td class="px-4 py-3 text-sm text-gray-600">${classMap[student.classId] || '—'}</td>
                </tr>
            `).join('');

            // Add click listeners
            tbody.querySelectorAll('.table-row').forEach(row => {
                row.addEventListener('click', () => {
                    const studentId = row.dataset.id;
                    const student = allStudents.find(s => s.id === studentId);
                    if (student) openProfile(student);
                });
            });
        }

        // Open profile modal
        function openProfile(student) {
            const modal = document.getElementById('profile-modal');
            const overlay = document.getElementById('modal-overlay');
            const content = modal.querySelector('.modal-content');

            // Populate basic info
            document.getElementById('modal-name').textContent = student.fullName || 'Unknown';
            document.getElementById('modal-code').textContent = student.publicCode || '';
            document.getElementById('info-code').textContent = student.publicCode || '—';
            document.getElementById('info-name').textContent = student.fullName || '—';
            document.getElementById('info-dob').textContent = formatDate(student.dob);
            
            const statusEl = document.getElementById('info-status');
            statusEl.textContent = student.status || 'unknown';
            statusEl.className = `text-sm font-medium px-2 py-0.5 rounded-full ${getStatusClass(student.status)}`;
            
            document.getElementById('info-school').textContent = student.school || '—';
            document.getElementById('info-class').textContent = classMap[student.classId] || '—';

            // Populate contacts
            const contacts = student.contacts || {};
            document.getElementById('info-student-phone').textContent = contacts.studentPhone || '—';
            document.getElementById('info-parent-name').textContent = contacts.parentName || '—';
            document.getElementById('info-parent-phone').textContent = contacts.parentPhone || '—';
            document.getElementById('info-emergency').textContent = contacts.emergencyContact || '—';

            // Populate notes
            const notes = student.notes || {};
            const notesSection = document.getElementById('notes-section');
            const hasNotes = notes.academic || notes.admin;
            
            if (hasNotes) {
                notesSection.classList.remove('hidden');
                document.getElementById('info-academic-notes').textContent = notes.academic || 'No academic notes';
                document.getElementById('info-admin-notes').textContent = notes.admin || 'No admin notes';
                
                document.getElementById('academic-notes-container').classList.toggle('hidden', !notes.academic);
                document.getElementById('admin-notes-container').classList.toggle('hidden', !notes.admin);
            } else {
                notesSection.classList.add('hidden');
            }

            // Show modal
            modal.classList.remove('hidden');
            requestAnimationFrame(() => {
                overlay.classList.add('active');
                content.classList.add('active');
            });
        }

        // Close profile modal
        function closeProfile() {
            const modal = document.getElementById('profile-modal');
            const overlay = document.getElementById('modal-overlay');
            const content = modal.querySelector('.modal-content');

            overlay.classList.remove('active');
            content.classList.remove('active');

            setTimeout(() => {
                modal.classList.add('hidden');
            }, 300);
        }

        // Initialize event listeners
        function initEventListeners() {
            // Search
            document.getElementById('search-input').addEventListener('input', (e) => {
                searchQuery = e.target.value;
                renderStudents();
            });

            // Filter toggle
            document.getElementById('filter-toggle').addEventListener('click', () => {
                filterPanelOpen = !filterPanelOpen;
                document.getElementById('filter-panel').classList.toggle('open', filterPanelOpen);
            });

            // Clear filters
            document.getElementById('clear-btn').addEventListener('click', () => {
                searchQuery = '';
                statusFilter = 'all';
                classFilter = 'all';
                sortBy = 'name-asc';
                
                document.getElementById('search-input').value = '';
                document.getElementById('status-filter').value = 'all';
                document.getElementById('class-filter').value = 'all';
                document.getElementById('sort-select').value = 'name-asc';
                
                renderStudents();
            });

            // Status filter
            document.getElementById('status-filter').addEventListener('change', (e) => {
                statusFilter = e.target.value;
                renderStudents();
            });

            // Class filter
            document.getElementById('class-filter').addEventListener('change', (e) => {
                classFilter = e.target.value;
                renderStudents();
            });

            // Sort
            document.getElementById('sort-select').addEventListener('change', (e) => {
                sortBy = e.target.value;
                renderStudents();
            });

            // Tabs
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    currentTab = btn.dataset.tab;
                    document.querySelectorAll('.tab-btn').forEach(b => {
                        b.classList.remove('tab-active');
                        b.classList.add('text-gray-500');
                    });
                    btn.classList.add('tab-active');
                    btn.classList.remove('text-gray-500');
                    renderStudents();
                });
            });

            // Modal close
            document.getElementById('close-modal').addEventListener('click', closeProfile);
            document.getElementById('modal-overlay').addEventListener('click', closeProfile);
        }

        // Initialize SDK
        if (window.elementSdk) {
            window.elementSdk.init({
                defaultConfig,
                onConfigChange: async (config) => {
                    document.getElementById('page-title').textContent = config.page_title || defaultConfig.page_title;
                },
                mapToCapabilities: (config) => ({
                    recolorables: [],
                    borderables: [],
                    fontEditable: undefined,
                    fontSizeable: undefined
                }),
                mapToEditPanelValues: (config) => new Map([
                    ['page_title', config.page_title || defaultConfig.page_title]
                ])
            });
        }

        // Initialize app
        async function init() {
            initEventListeners();
            await loadClasses();
            loadStudents();
        }

        init();
    </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9bedcc65d0cfa880',t:'MTc2ODU2ODQ1NS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>